# 현재 앱 구조의 문제점 진단 및 개선된 앱 구조 소개

## 현재 앱 구조의 문제점

1. localStorage가 비워져도, 화면에서 뿌려주는 목록에 변화가 없다. (새로고침해야 반영이 된다.)

2. 화면에서 `Clear ALL` 을 하면 localStorage가 비워지지만 화면에 변화가 없다.

   Clear ALL은 FooterComponent인데 목록을 뿌려주는 ListComponent에게 해당 사실을 알리지 않았기 때문이다.

컴포넌트가 분리되면서 각각의 컴포넌트 간에 데이터 전달이 안되고 전송이 안돼서 생기는 문제이다.



## 개선된 앱 구조

### AS-IS

![image-20220126133433320](assets/[ch02]/image-20220126133433320.png)



### TO-BE

![image-20220126133810941](assets/[ch02]/image-20220126133810941.png)



전체 컴포넌트가 하나의 데이터만 바라보는 구조이다.

전체적인 컴포넌트에서 사용할 데이터를 한 곳으로 모으고, 한 곳에서만 데이터 조작이 일어난다.

TodoInput, TodoList, TodoFooter 등의 하위 컴포넌트들은 표현만 한다.

실질적인 데이터 조작은 공통적으로 가지고 있는 상위 컴포넌트인 `App`을 만들어서 여기에서 진행한다.

App에서는 `todoItems` 속성으로 하위 컴포넌트에게 `props`로 전달하고, TodoInput과 TodoFooter에서 각각 이벤트가 발생하면 App의 `todoItems` 데이터가 변경된다.

* App은 **컨테이너** 개념으로 보면 된다.
* 컴포넌트 설계 관점
  * 프레젠터 : 단순히 화면을 표현하는 컴포넌트
    * TodoInput, TodoList, TodoFooter
  * 컨테이너 : 앱의 동작, 데이터 조작 등 비지니스 로직이 들어간 컴포넌트
    * App



---

# 할 일 목록 표시 기능



* App에서 todoItems 데이터를 가지고 있도록 만들고 `v-bind`를 이용해 하위 컴포넌트에게 `propsdata`라는 이름으로 데이터를 전달

```html
<TodoList v-bind:내려보낼 프롭스 속성 이름="현재 위치의 컴포넌트 데이터 속성"></TodoList>
<TodoList v-bind:propsdata="todoItems"></TodoList>
```



* 하위 컴포넌트에서 전달 받을 데이터 변수를 선언하면 된다.

```vue
<script>
export default {
    props: ['propsdata'],
  
}
</script>
```













































